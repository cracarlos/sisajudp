<script>
  $(document).ready(function(){
    $("#asd").click(function(){
      var cedula = $('#cedula').val();
      $.ajax(
            {   url: 'traer_cedulados',
              data: {cedula: cedula},
              type: 'post',
              //dataType: 'json',
              success: function(data) {
             // success: function(e, data, status, xhr) {
                //alert('AJAX call was successful!');
                console.log('Data from the server' + data.PRIMERNOMBRE);

                 
                
                procesarDatos(data)
              },
              error: function() {
                  alert('Error en llamada!');
              }
            }
          );

      function procesarDatos(datos_devueltos){
          console.log("11111111");
          $("#primer_nombre").val(datos_devueltos.PRIMERNOMBRE);
          $("#segundo_nombre").val(datos_devueltos.SEGUNDONOMBRE);
          $("#primer_apellido").val(datos_devueltos.PRIMERAPELLIDO);
          $("#segundo_apellido").val(datos_devueltos.SEGUNDOAPELLIDO);
          $("#FormCedula").val(datos_devueltos.NUMCEDULA);
          }

      //return false
    });
  });
</script>
<%#= form_with scope: :acta, id: 'formulario', url: juramentados_path, local: true do |form| %>
  <%#= form.text_field :cedula, :class => "form-control col-md-7", placeholder: "Cedula", id: 'cedula' %>
  <input class="form-control col-md-7" placeholder="Cedula" id="cedula" type="text" name="acta[cedula]">
  <input type="button" value="Buscar" id="asd">
  <%#= form.submit "Buscar", :class => "btn tabla-color col-md-2 offset-md-3 " %>
<% #end %>


<section class = 'offset-md-1'> 
  <h1 class="">Registro</h1>
  <%= form_with scope: :acta, url: juramentados_path, local: true do |form| %>

  <div class = "form-row">
    <div class="form-group">
      <%= form.label :Acta %><br> 
      <%= form.select :tac_acta_id, options_from_collection_for_select(@tacactas,
            :id, :numero_acta), { prompt: 'Seleccione...' }, { required: true, class: 'form-control' } %>
    </div>
  </div>
 

  <div class = "form-row">
    <%= form.label :Nombres %>
  </div>
  <div class = "form-row">
    <div class="form-group">
      <%= form.text_field :primer_nombre, :class => "form-control", placeholder: "Primer nombre", id: 'primer_nombre' %>
    </div>
    <div class="form-group">
      <%= form.text_field :segundo_nombre, :class => "form-control offset-md-1", placeholder: "Segundo nombre", id: 'segundo_nombre' %>
    </div>

  </div>

  <div class = "form-row">
    <%= form.label :Apellidos %>
  </div>
  <div class = "form-row">
    <div class="form-group">
      <%= form.text_field :primer_apellido, :class => "form-control", placeholder: "Primer apellido", id: 'primer_apellido' %>
    </div>
    <div class="form-group">
      <%= form.text_field :segundo_apellido, :class => "form-control offset-md-1", placeholder: "Segundo apellido", id: 'segundo_apellido' %>
    </div>
  </div>

  <div class = "form-row">
    <div class="form-group">
      <%= form.text_field :cedula, :class => "form-control col-md-7", placeholder: "Cedula", id: 'FormCedula' %>
    </div>
  </div>
  
  <div class = "form-row">
    <div class="form-group">
      <%= form.label :cargo %><br> 
      <%= form.select :cargo, options_from_collection_for_select(@taccargos,
            :cargos, :cargos), { prompt: 'Seleccione...' }, { required: true, class: 'form-control' } %>
    </div>
  </div>

  <div class = "form-row">
    <div class="form-group">
      <%= form.label :sede %><br> 
      <%= form.select :sede, options_from_collection_for_select(@tinsedes,
            :descripcion, :descripcion), { prompt: 'Seleccione...' }, { required: true, class: 'form-control' } %>
    </div>
  </div>

  <div class = "form-row">
    <div class="form-group">
      <%= form.label :competencia %><br> 
      <%= form.select :competencia, options_from_collection_for_select(@taccompetencias,
            :nombre_completo, :nombre_completo), { prompt: 'Seleccione...' }, { required: true, class: 'form-control' } %>
    </div>
  </div>

  <div class = "form-row">
    <div class="form-group">
      <%= form.label :resolucion %><br>
      <%= form.text_field :resolucion, :class => "form-control" %>
    </div>
    <div class="form-group" style="margin-left: 30px;">
      <%= form.label :fecha %><br>
      <%= form.date_field( :fecha_resolucion, start_year: 2019)%>
    </div>
  </div>
  <div style="margin-top: 20px;">
    <%= form.submit "Guardar", :class => "btn tabla-color col-md-2 offset-md-3 " %>
  </div>
  <% end %>
</section>
